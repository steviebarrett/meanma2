<?php

namespace App\Database;

use CodeIgniter\Test\CIUnitTestCase;
use CodeIgniter\Test\DatabaseTestTrait;

use Tests\Support\Database\Seeds\DictionarySeeder;

class DictionaryModelTest extends CIUnitTestCase
{
	use DatabaseTestTrait;

	// For Migrations
	protected $migrate     = true;
	protected $migrateOnce = false;
	protected $refresh     = true;
	protected $namespace   = 'App';

	// For Seeds
	protected $seedOnce = false;
	protected $seed     = DictionarySeeder::class;

	protected $dictionaries;

	protected function setUp(): void
	{
		parent::setUp();

		$this->dictionaries = new \App\Models\DictionaryModel();
	}

	protected function tearDown(): void
	{
		parent::tearDown(); // TODO: Change the autogenerated stub
	}

	public function testDictionaryCount()
	{
		$results = $this->dictionaries->findAll();

		$this->assertCount(3, $results);
	}

	public function testTableRowCount()
	{
		$criteria = ['short_name' => 'test3'];
		$this->seeNumRecords(1, 'dictionary', $criteria);
	}

	public function testCanSeeTest3()
	{
		$criteria = ['short_name' => 'test3'];
		$this->seeInDatabase('dictionary', $criteria);
	}

}